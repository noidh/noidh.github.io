<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Lighting â€” Doan Huu Noi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../../../index_css.css">
    <script src="../../../../index.js"></script>

</head>
<body>
    <div id="header" class="site-header"></div>
    <script>Header("header");</script>

    <div class="layout">
        <aside class="sidebar" aria-label="Site navigation">
            <nav class="nav">
                <div class="nav_item">
                    <a href="../../../../index.html" class="nav_link">Home</a>
                </div>
                <div class="nav_item nav_item--dropdown">
                    <a href="../../../../project.html" class="nav_link">Personal Projects</a>
                    <ul class="nav_dropdown">
                        <li><a href="../../../../pages/sw/ximagetool/ximagetool.html">XImage Tool</a></li>
                        <li><a href="../../../../pages/sw/ximage2text/ximagetotext.html">XText</a></li>
                    </ul>
                </div>
                <div class="nav_item nav_item--dropdown">
                    <a href="../../../../blog.html" class="nav_link nav_link--current">Technical Blog</a>
                    <ul class="nav_dropdown">
                        <li><a href="../../../../notes_ip.html">Image Processing</a></li>
                        <li><a href="../../../../notes_cv.html">Computer Vision</a></li>
                        <li><a href="../../../../notes_ml.html">Machine Learning</a></li>
                        <li><a href="../../../../opengl_notes.html">3D Rendering</a></li>
                        <li><a href="../../../../notes_miscellaneous.html">Miscellaneous</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main class="content">
            <section class="section page-prose">
			<h3>1. Basics of the lighting model in OpenGL</h3>
            
            <p>In order to simulate the lighting, OpenGL uses lighting models which are based on approximations of reality. One of the most popular and simplest models is Phong lighting model.</p>
            <p>The Phong lighting model basically consists of three components: ambient, diffuse, and specular</p>            
            <img class="image_center" src="basic_lighting_phong.png">

            <h3>A. Ambient lighting</h3>
            <p>There is always some light from somewhere in the world, thus objects are never completely dark. For simple simulation, we use an small constant value as ambient factor that always gives the object some color.</p>
            <code class="code_view">
                <pre>
float fAmbientStrength = 0.1;
vec3 ambient = fAmbientStrength * lightColor;
                </pre>
            </code>
            
            <h3>B. Diffuse lighting</h3>
            <p>The diffuse lighting is calculated by the dot product of the light source's direction vector and the surface normal. Since dot product of 2 vectors gradually converges to 1 if angle between them goes to zero, the closer the surface is aligned to the light source's direction, the more lighting it can receive.</p>
            <img class="image_center" src="diffuse_light.png">
            <code class="code_view">
                <pre>
vec3 norm = normalize(fg_in.Normal);
vec3 lightDir = normalize(lightPos - fg_in.FragPos);

float diff = max(dot(norm, lightDir), 0.0);
vec3 diffuse = diff * lightColor;
                </pre>
            </code>


            <h3>C. Specular lighting</h3>
            <p>The specular lighting depicts the bright spot on a shiny object. It is calculated by the dot product of the reflection of the light direction vector and the view direction vector. The closer the angle between them, the more light our eyes perceive. The pow operation makes the specular term fall to zero faster so that the bright spot appears more intuitively.</p>
            <img class="image_center" src="basic_lighting_specular_theory.png">
            <code class="code_view">
                <pre>
vec3 cameraDir = normalize(cameraPos - fg_in.FragPos);
vec3 reflectDir = reflect(-lightDir, norm);

float spec = pow(max(dot(cameraDir, reflectDir), 0.0), 8);

float specularStrength = 0.5;
vec3 specular = specularStrength * spec * lightColor;
                </pre>
            </code>     
            
            <h3>D. Vertex Shader</h3>
            <code class="code_view">
                <pre>
#version 330 core
layout(location = 0) in vec3 aPos;
layout(location = 1) in vec3 aNormal;
layout(location = 2) in vec2 aTexCoord;

out VS_OUT
{
    vec3 Normal;
    vec2 TexCoord;
    vec3 FragPos;

} vs_out;

uniform mat4 model;
uniform mat4 view;
uniform mat4 projection;

void main(void)
{
    gl_Position = projection * view * model * vec4(aPos, 1.0);
    vs_out.TexCoord = aTexCoord;
    vs_out.Normal = vec3(model * vec4(aNormal, 1.0));
    vs_out.FragPos = vec3(model * vec4(aPos, 1.0));
}                    
                </pre>
            </code>  

            <h3>E. Fragment Shader</h3>
            <code class="code_view">
                <pre>
#version 330 core

uniform sampler2D qt_Texture0;

uniform vec3 lightPos;
uniform vec3 lightColor;

uniform vec3 cameraPos;

in VS_OUT
{
    vec3 Normal;
    vec2 TexCoord;
    vec3 FragPos;

} fg_in;

out vec4 FragColor;

void main(void)
{
    float fAmbientStrength = 0.1;
    vec3 ambient = fAmbientStrength * lightColor;

    vec3 norm = normalize(fg_in.Normal);
    vec3 lightDir = normalize(lightPos - fg_in.FragPos);

    float diff = max(dot(norm, lightDir), 0.0);
    vec3 diffuse = diff * lightColor;

    vec3 cameraDir = normalize(cameraPos - fg_in.FragPos);
    vec3 reflectDir = reflect(-lightDir, norm);

    float spec = pow(max(dot(cameraDir, reflectDir), 0.0), 8);

    float specularStrength = 0.5;
    vec3 specular = specularStrength * spec * lightColor;

    FragColor = vec4(diffuse + ambient + specular, 1.0) * texture(qt_Texture0, fg_in.TexCoord);
}
                                   
                </pre>
            </code> 

			<h3>2. Experiment</h3>
			<p>Demo video</p>
			<iframe width="853" height="480" frameborder="0" allowfullscreen src="https://www.youtube.com/embed/3FZQZEDzwYQ"></iframe>

			<h3>3. References</h3>
			<p>
				<ul>
                    <li>https://learnopengl.com/Lighting/Basic-Lighting</li>
                </ul>
			</p>
            </section>
        </main>
    </div>
</body>
</html>
